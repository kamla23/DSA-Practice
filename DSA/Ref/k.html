<!DOCTYPE html>
<html>
<head>
  <title>Fetch All Methods (CRUD)</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, button { margin: 5px; padding: 5px; }
    pre { background-color: #f0f0f0; padding: 10px; }
  </style>
</head>
<body>

  <h2>🔧 CRUD Operations with fetch()</h2>

  <input type="text" id="title" placeholder="Title" />
  <input type="text" id="body" placeholder="Body" />
  <br>

  <button onclick="createPost()">➕ POST (Create)</button>
  <button onclick="readPost()">📥 GET (Read)</button>
  <button onclick="updatePost()">♻️ PUT (Update)</button>
  <button onclick="patchPost()">🩹 PATCH (Partial Update)</button>
  <button onclick="deletePost()">❌ DELETE</button>

  <h3>📦 Output:</h3>
  <pre id="output">Waiting for action...</pre>

  <script>
    const apiUrl = 'https://jsonplaceholder.typicode.com/posts/1'; // Using post with id 1

    // ✅ 1. GET (Read)
    function readPost() {
      fetch(apiUrl)
        .then(res => res.json())
        .then(data => show(data))
        .catch(err => show(err));
    }

    // ✅ 2. POST (Create)
    function createPost() {
      let title = document.getElementById('title').value;
      let body = document.getElementById('body').value;

      fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          title: title,
          body: body,
          userId: 1
        })
      })
      .then(res => res.json())
      .then(data => show(data))
      .catch(err => show(err));
    }

    // ✅ 3. PUT (Full Update)
    function updatePost() {
      let title = document.getElementById('title').value;
      let body = document.getElementById('body').value;

      fetch(apiUrl, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          id: 1,
          title: title,
          body: body,
          userId: 1
        })
      })
      .then(res => res.json())
      .then(data => show(data))
      .catch(err => show(err));
    }

    // ✅ 4. PATCH (Partial Update)
    function patchPost() {
      let title = document.getElementById('title').value;

      fetch(apiUrl, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title: title })
      })
      .then(res => res.json())
      .then(data => show(data))
      .catch(err => show(err));
    }

    // ✅ 5. DELETE
    function deletePost() {
      fetch(apiUrl, { method: 'DELETE' })
        .then(res => {
          if (res.ok) {
            show({ message: 'Post deleted successfully!' });
          } else {
            throw new Error('Delete failed');
          }
        })
        .catch(err => show(err));
    }

    // Helper function to show output
    function show(data) {
      document.getElementById('output').textContent = JSON.stringify(data, null, 2);
    }
  </script>

</body>
</html>
